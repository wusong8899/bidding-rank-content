(()=>{var t={n:n=>{var i=n&&n.__esModule?()=>n.default:()=>n;return t.d(i,{a:i}),i},d:(n,i)=>{for(var e in i)t.o(i,e)&&!t.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:i[e]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};(()=>{"use strict";function i(t,n){return i=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},i(t,n)}function e(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n)}t.r(n),flarum.core.compat.extend;const a=flarum.core.compat["components/ExtensionPage"];var o=t.n(a);const r=flarum.core.compat["components/LoadingIndicator"];var s=t.n(r);const l=flarum.core.compat["components/Button"];var d=t.n(l);const c=flarum.core.compat.Component;var u=t.n(c);const p=flarum.core.compat["components/Modal"];var g=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.oninit=function(n){t.prototype.oninit.call(this,n),this.biddingRankListItem=this.attrs.biddingRankListItem,this.loading=!1},i.className=function(){return"Modal--small"},i.title=function(){return app.translator.trans("wusong8899-bidding-rank.admin.delete-confirmation")},i.content=function(){var t=this;return m("div",{className:"Modal-body"},m("div",{className:"Form-group",style:"text-align: center;"},d().component({className:"Button Button--primary",type:"submit",loading:this.loading},app.translator.trans("wusong8899-decoration-store.lib.confirm"))," ",d().component({className:"Button",loading:this.loading,onclick:function(){t.hide()}},app.translator.trans("wusong8899-decoration-store.lib.cancel"))))},i.onsubmit=function(t){var n=this;t.preventDefault(),this.loading=!0,this.biddingRankListItem.save({isDelete:1}).then((function(){return location.reload()}),(function(t){n.loading=!1}))},n}(t.n(p)());g.isDismissibleViaBackdropClick=!1,g.isDismissibleViaCloseButton=!0;const b=flarum.core.compat["helpers/username"];var f=t.n(b),h=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.view=function(){var t=this,n=this.attrs,i=n.biddingRankListItem,e=(n.rankID,app.forum.attribute("antoinefr-money.moneyname")||"[money]"),a=i.attribute("bid"),o=i.fromUser(),r=(i.url(),i.content()),s=i.title();return e.replace("[money]",a),m("div",{className:"biddingRankSettingContainer"},m("div",{style:"float:right"},d().component({style:"font-weight:bold;",className:"Button Button--danger",onclick:function(n){t.deleteItem(i)}},app.translator.trans("wusong8899-bidding-rank.admin.delete"))),m("div",null,m("b",null,app.translator.trans("wusong8899-bidding-rank.admin.bidding-rank-list-username"),": "),f()(o)," | ",m("b",null,app.translator.trans("wusong8899-bidding-rank.admin.bidding-rank-list-title"),": "),s," | ",m("b",null,app.translator.trans("wusong8899-bidding-rank.admin.bidding-rank-list-bid"),": "),a),m("div",null,m("b",null,app.translator.trans("wusong8899-bidding-rank.admin.bidding-rank-list-content"),": "),r))},i.deleteItem=function(t){app.modal.show(g,{biddingRankListItem:t})},n}(u()),v=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.oninit=function(n){t.prototype.oninit.call(this,n),this.loading=!0,this.moreResults=!1,this.biddingRankList=[],this.loadResults()},i.content=function(){var t,n=this;return this.loading&&(t=s().component({size:"large"})),m("div",{className:"ExtensionPage-settings FlarumBadgesPage"},m("div",{className:"container"},m("ul",{style:"padding:0px;list-style-type: none;"},this.biddingRankList.map((function(t){return m("li",{itemID:t.id(),style:"margin-top:5px;background: var(--body-bg);"},h.component({biddingRankListItem:t}))}))),!this.loading&&0===this.biddingRankList.length&&m("div",null,m("div",{style:"font-size:1.4em;color: var(--muted-more-color);text-align: center;line-height: 100px;"},app.translator.trans("wusong8899-decoration-store.lib.list-empty"))),!t&&this.hasMoreResults()&&m("div",{style:"text-align:center;padding:20px"},m(d(),{className:"Button Button--primary",disabled:this.loading,loading:this.loading,onclick:function(){return n.loadMore()}},app.translator.trans("wusong8899-decoration-store.lib.list-load-more"))),t&&m("div",{className:"BiddingRankContent-loadMore"},t)))},i.hasMoreResults=function(){return this.moreResults},i.loadMore=function(){this.loading=!0,this.loadResults(this.biddingRankList.length)},i.parseResults=function(t){var n=this;return this.moreResults=!!t.payload.links&&!!t.payload.links.next,[].push.apply(this.biddingRankList,t),app.store.find("biddingRankHistory").catch((function(){})).then((function(i){return n.hasBid=i.length>0,n.hasBid&&(n.biddingRankHistoryData=i[0]),n.loading=!1,m.redraw(),t}))},i.loadResults=function(t){return void 0===t&&(t=0),app.store.find("biddingRankList",{page:{offset:t}}).catch((function(){})).then(this.parseResults.bind(this))},n}(o());const y=flarum.core.compat.Model;var k=t.n(y),R=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(k());Object.assign(R.prototype,{id:k().attribute("id"),title:k().attribute("title"),content:k().attribute("content"),user_id:k().attribute("user_id"),url:k().attribute("url"),bid:k().attribute("bid"),fromUser:k().hasOne("fromUser")}),app.initializers.add("wusong8899-client1-bidding-rank-content",(function(){app.store.models.biddingRankList=R,app.extensionData.for("wusong8899-bidding-rank-content").registerPage(v)}))})(),module.exports=n})();
//# sourceMappingURL=admin.js.map